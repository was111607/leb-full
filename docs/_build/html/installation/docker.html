
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Docker installation &#8212; Local EnteroBase Documentation  documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Singularity Installation" href="singularity.html" />
    <link rel="prev" title="Manual Installation" href="manual.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="singularity.html" title="Singularity Installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="manual.html" title="Manual Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Local EnteroBase Documentation  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="install.html" >Installation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="manual.html" accesskey="U">Manual Installation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="docker-installation">
<span id="docker-installation-label"></span><h1>Docker installation<a class="headerlink" href="#docker-installation" title="Permalink to this headline">¶</a></h1>
<p>To set up local enterobase, a prerequisite is having docker installed on the host machine.</p>
<div class="section" id="check-if-docker-is-installed">
<h2>Check if Docker is Installed<a class="headerlink" href="#check-if-docker-is-installed" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Run the following command to verify whether docker is installed on the host system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="install-docker">
<h2>Install Docker<a class="headerlink" href="#install-docker" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The following installation steps use the official documentation: “<a class="reference external" href="https://docs.docker.com/engine/install">https://docs.docker.com/engine/install</a>”.</p></li>
<li><p>The installation process is specific to the distro being used, and the official documentation is comprehensive on the installation process.</p></li>
<li><p>NOTE: If you are using CentOS 8, or Fedora 32 and above, Docker is no longer officially supported but still works. Instructions on how to install Docker on these OS are provided below. Please note both of these will require restarting the server.</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Officially Supported Distros By Docker</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 45%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operating System</p></th>
<th class="head"><p>x86_64 / amd64</p></th>
<th class="head"><p>ARM</p></th>
<th class="head"><p>ARM64 / AARCH64</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CentOS 7</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>Debian 9/10</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>Fedora 30/31</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>Raspbian</p></td>
<td></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>Ubuntu 16.04/18.04/20.04</p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
<td></td>
</tr>
</tbody>
</table>
</li>
<li><p>NOTE: that the installation process, and Docker itself requires the user to have sudo privileges.</p></li>
<li><p>If you do not have sudo privileges please contact your system administrator to install and setup the container.</p></li>
</ul>
</div>
<div class="section" id="example-for-ubuntu">
<h2>Example for Ubuntu<a class="headerlink" href="#example-for-ubuntu" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>There are two approaches that can be taken that are outlined below.</p></li>
</ul>
<p><strong>Approach 1</strong></p>
<ul>
<li><p>The following command can be used to install Docker in one command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">snap</span> <span class="n">install</span> <span class="n">docker</span>     <span class="c1"># version 19.03.11</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Approach 2</strong></p>
<ul class="simple">
<li><p>These are the steps outlined in the official documentation to install Docker on the VM:</p></li>
</ul>
<ol class="arabic simple">
<li><p>Update the <em>apt</em> package index and install packages to allow <em>apt</em> to use a repository over HTTPS:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>

<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> \
  <span class="n">apt</span><span class="o">-</span><span class="n">transport</span><span class="o">-</span><span class="n">https</span> \
  <span class="n">ca</span><span class="o">-</span><span class="n">certificates</span> \
  <span class="n">curl</span> \
  <span class="n">gnupg</span><span class="o">-</span><span class="n">agent</span> \
  <span class="n">software</span><span class="o">-</span><span class="n">properties</span><span class="o">-</span><span class="n">common</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Add Docker’s official GPG key:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">fsSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="n">gpg</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">add</span> <span class="o">-</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Use the following command to set up the stable repository for x86_64/amd64 architectures:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> \
<span class="s2">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="se">\</span>
<span class="s2">$(lsb_release -cs) </span><span class="se">\</span>
<span class="s2">stable&quot;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Install the Docker Engine:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="n">cli</span> <span class="n">containerd</span><span class="o">.</span><span class="n">io</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Verify its installation by running the hello-world image:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">docker</span> <span class="n">run</span> <span class="n">hello</span><span class="o">-</span><span class="n">world</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="example-for-centos-8">
<h2>Example for CentOS 8<a class="headerlink" href="#example-for-centos-8" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Make sure the system is update by running the following command, then rebooting if necessary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">update</span> <span class="o">-</span><span class="n">y</span> <span class="p">;</span> <span class="n">reboot</span>
</pre></div>
</div>
</li>
</ul>
<ol class="arabic simple">
<li><p>Enable docker-ce repository:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">repo</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">centos</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">.</span><span class="n">repo</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Verify there is a version of docker-ce available to download:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="nb">list</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span>

<span class="n">Docker</span> <span class="n">CE</span> <span class="n">Stable</span> <span class="o">-</span> <span class="n">x86_64</span> <span class="mf">1.7</span> <span class="n">kB</span><span class="o">/</span><span class="n">s</span> <span class="o">|</span> <span class="mf">3.8</span> <span class="n">kB</span> <span class="mi">00</span><span class="p">:</span><span class="mi">02</span>
<span class="n">Available</span> <span class="n">Packages</span>
<span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">.</span><span class="n">x86_64</span>       <span class="mi">3</span><span class="p">:</span><span class="mf">19.03</span><span class="o">.</span><span class="mi">13</span><span class="o">-</span><span class="mf">3.</span><span class="n">el8</span>            <span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="n">stable</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Install docker-ce</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">install</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span> <span class="o">--</span><span class="n">nobest</span> <span class="o">-</span><span class="n">y</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Start and enable the service:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">start</span> <span class="n">docker</span>
<span class="n">systemctl</span> <span class="n">enable</span> <span class="n">docker</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Verify its installation:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="example-for-fedora-31-32-and-33">
<h2>Example for Fedora 31, 32, and 33<a class="headerlink" href="#example-for-fedora-31-32-and-33" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This will involve installing the open-source version of Docker, Moby, which is better maintained for these verions of Fedora.</p></li>
</ul>
<ol class="arabic simple">
<li><p>Uninstall old versions of docker</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">remove</span> <span class="n">docker</span><span class="o">-*</span>
<span class="n">sudo</span> <span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">disable</span> <span class="n">docker</span><span class="o">-*</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Enable old CGroups as Docker does not currently support CGroupsV2:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">grubby</span> <span class="o">--</span><span class="n">update</span><span class="o">-</span><span class="n">kernel</span><span class="o">=</span><span class="n">ALL</span> <span class="o">--</span><span class="n">args</span><span class="o">=</span><span class="s2">&quot;systemd.unified_cgroup_hierarchy=0&quot;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Setup firewall:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">firewall</span><span class="o">-</span><span class="n">cmd</span> <span class="o">--</span><span class="n">permanent</span> <span class="o">--</span><span class="n">zone</span><span class="o">=</span><span class="n">trusted</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">interface</span><span class="o">=</span><span class="n">docker0</span>
<span class="n">sudo</span> <span class="n">firewall</span><span class="o">-</span><span class="n">cmd</span> <span class="o">--</span><span class="n">permanent</span> <span class="o">--</span><span class="n">zone</span><span class="o">=</span><span class="n">FedoraWorkstation</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">masquerade</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Install Moby:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">moby</span><span class="o">-</span><span class="n">engine</span> <span class="n">docker</span><span class="o">-</span><span class="n">compose</span>
<span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">enable</span> <span class="n">docker</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Restart server:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">reboot</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Verify its installation:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Docker installation</a><ul>
<li><a class="reference internal" href="#check-if-docker-is-installed">Check if Docker is Installed</a></li>
<li><a class="reference internal" href="#install-docker">Install Docker</a></li>
<li><a class="reference internal" href="#example-for-ubuntu">Example for Ubuntu</a></li>
<li><a class="reference internal" href="#example-for-centos-8">Example for CentOS 8</a></li>
<li><a class="reference internal" href="#example-for-fedora-31-32-and-33">Example for Fedora 31, 32, and 33</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="manual.html"
                        title="previous chapter">Manual Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="singularity.html"
                        title="next chapter">Singularity Installation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/installation/docker.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="singularity.html" title="Singularity Installation"
             >next</a> |</li>
        <li class="right" >
          <a href="manual.html" title="Manual Installation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Local EnteroBase Documentation  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="install.html" >Installation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="manual.html" >Manual Installation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Local EnteroBase Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>